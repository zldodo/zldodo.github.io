<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>搭建AWS云计算配置环境</title><meta name="description" content="Let it be"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="实操是快速有效掌握一门知识的最好途径。随着AI崛起，许多科技热点不断涌现，机器学习当属个中翘楚。想要愉快玩耍机器学习，自然离不开GPU的支持。但对于新手入门，想要自己搭建GPU服务器，工程量显得有些大；再加上囊中羞涩，个人购买GPU实在有些困难。在这种情况下，云计算服务是一个不错的选择。
什么是云计算？简单说来，云计算就是通过 Internet（“云”）交付服务器、存储空间、数据库、网络、软件和分析等计算服务。提供这些计算服务的公司称为云提供商，他们通常基于用户使用对云计算服务进行收费，类似于家用水电的计费方式。
云计算服务提供商
AWS亚马逊出品，市场老大，商业云计算名义上的先驱，主要针对企业级用户，特别是在国内没有开放个人账户。

Azure微软出品，与自家产品无线缝合，一条龙服务，正在追赶AWS。

.."><meta name="generator" content="Hexo 5.4.0"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">zldodo's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">搭建AWS云计算配置环境</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%91%E8%AE%A1%E7%AE%97%EF%BC%9F"><span class="toc-text">什么是云计算？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E5%95%86"><span class="toc-text">云计算服务提供商</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">AWS环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Errors-bash-setup-p2-sh-or-setup-t2-sh"><span class="toc-text">Errors: bash setup_p2.sh or setup_t2.sh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Error-%EF%BC%9Assh-command-not-found"><span class="toc-text">Error ：ssh command not found</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Start-Over-with-AWS%E6%AD%A5%E9%AA%A4"><span class="toc-text">Start Over with AWS步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Error-occurred-AddressLimitExceeded"><span class="toc-text">Error occurred (AddressLimitExceeded)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8AWS"><span class="toc-text">启动AWS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vim-%E4%BD%BF%E7%94%A8"><span class="toc-text">vim 使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A5%BD%E7%94%A8%E7%9A%84%E7%BB%88%E7%AB%AF%E5%B0%8F%E5%B7%A5%E5%85%B7"><span class="toc-text">好用的终端小工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tmux%E4%BD%BF%E7%94%A8"><span class="toc-text">tmux使用</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/GPU"><i class="tag post-item-tag">GPU</i></a><a href="/tags/Deep%20Learning"><i class="tag post-item-tag">Deep Learning</i></a><a href="/tags/Windows"><i class="tag post-item-tag">Windows</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">搭建AWS云计算配置环境</h1><time class="has-text-grey" datetime="2017-09-05T08:10:02.000Z">2017-09-05</time><article class="mt-2 post-content"><p>实操是快速有效掌握一门知识的最好途径。随着AI崛起，许多科技热点不断涌现，机器学习当属个中翘楚。想要愉快玩耍机器学习，自然离不开GPU的支持。但对于新手入门，想要自己搭建GPU服务器，工程量显得有些大；再加上囊中羞涩，个人购买GPU实在有些困难。在这种情况下，云计算服务是一个不错的选择。</p>
<h1 id="什么是云计算？"><a href="#什么是云计算？" class="headerlink" title="什么是云计算？"></a>什么是云计算？</h1><p>简单说来，云计算就是通过 Internet（“云”）交付服务器、存储空间、数据库、网络、软件和分析等计算服务。提供这些计算服务的公司称为云提供商，他们通常基于用户使用对云计算服务进行收费，类似于家用水电的计费方式。</p>
<h1 id="云计算服务提供商"><a href="#云计算服务提供商" class="headerlink" title="云计算服务提供商"></a>云计算服务提供商</h1><ul>
<li><p>AWS<br>亚马逊出品，市场老大，商业云计算名义上的先驱，主要针对企业级用户，特别是在国内没有开放个人账户。</p>
</li>
<li><p>Azure<br>微软出品，与自家产品无线缝合，一条龙服务，正在追赶AWS。</p>
</li>
<li><p> APP engine<br>谷歌出品，大名鼎鼎Mapduce框架的提出者，在分布式计算和分布式存储方面掌握核心科技。</p>
</li>
<li><p>OVH<br>一家法国公司，价格比较低，性价比高。</p>
</li>
<li><p>阿里云<br>阿里巴巴出品，在全球来看算是第二梯队的厂商，拥有本土优势。</p>
</li>
</ul>
<h1 id="AWS环境搭建"><a href="#AWS环境搭建" class="headerlink" title="AWS环境搭建"></a>AWS环境搭建</h1><p>最近正在学习一门MOOC课程，叫<a target="_blank" rel="noopener" href="http://course.fast.ai/index.html">Practical Deep Learning for Coders</a>, 由 JEREMY HOWARD （President Kaggle ）讲授，AWS是这门课推荐，所以我也就一个一个轮子地搭建AWS GPU server。</p>
<p>首先，推荐观看这个<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=8rjRfW4JM2I">新手指南视频</a>,配套有<a target="_blank" rel="noopener" href="http://wiki.fast.ai/index.php/AWS_install">wiki page</a>,里面有常见问题的解决办法。如果有些问题wiki页面里没有涉及，你可以在这个<a target="_blank" rel="noopener" href="http://forums.fast.ai/">论坛</a>查找和询问。最终，你一定能得到解决办法的。</p>
<p>AWS GPU server的搭建过程我不祥述，上面的新手指南和wiki已经说明得十分详细，下面主要罗列出我在搭建环境中遇到问题及解决方法，方便大家使用。</p>
<h2 id="Errors-bash-setup-p2-sh-or-setup-t2-sh"><a href="#Errors-bash-setup-p2-sh-or-setup-t2-sh" class="headerlink" title="Errors: bash setup_p2.sh or setup_t2.sh"></a>Errors: bash setup_p2.sh or setup_t2.sh</h2><p>我在这儿卡壳了很久，遇到了许多奇奇怪怪的错误。而且，我也发现这部分是论坛里面大家问的最多的地方。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setup_t2.sh: line 7: syntax error near unexpected token `newline&#x27;</span><br><span class="line">setup_t2.sh: line 7: `&lt;!DOCTYPE html&gt;&#x27;</span><br></pre></td></tr></table></figure>
<p>setup_t2.sh 格式问题，不应是HTML格式 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;\r&#x27;: command not found</span><br></pre></td></tr></table></figure>
<p>setup_t2.sh 格式问题，用notepad++z转换成UNIX格式</p>
<p>后面发现，这两个问题同属同一个原因：当使用<code>wget url</code>时，复制的地址下载的是html 格式文件，而不是我们需要的.sh或者.py格式。解决办法是在github里clone所需文件，然后复制到cygwin下面的目录。另外，我还发现了一个办法，从论坛<a target="_blank" rel="noopener" href="http://forums.fast.ai/t/unreadable-notebook-home-ubuntu-nbs-lesson1-ipynb-notjsonerror-notebook-does-not-appear-to-be-json/2966/4">这里</a>搬运来的。具体是在github中选择文件的 view-raw模式，然后复制地址，就可以使用<code>wget</code>的方式下载文件了。</p>
<h2 id="Error-：ssh-command-not-found"><a href="#Error-：ssh-command-not-found" class="headerlink" title="Error ：ssh command not found"></a>Error ：ssh command not found</h2><p>需要安装一下openssh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cyg install openssh</span><br></pre></td></tr></table></figure>

<h2 id="Start-Over-with-AWS步骤"><a href="#Start-Over-with-AWS步骤" class="headerlink" title="Start Over with AWS步骤"></a>Start Over with AWS步骤</h2><p>若遇到实在无法解决的错误，可以考虑重新安装一次，参考<a target="_blank" rel="noopener" href="http://wiki.fast.ai/index.php/Starting_Over_with_AWS">Start Over with AWS</a><br>** 切记**！！！要删除.pem,通过<code>rm ~/.ssh/aws-key-fast-ai.pem</code>。</p>
<h2 id="Error-occurred-AddressLimitExceeded"><a href="#Error-occurred-AddressLimitExceeded" class="headerlink" title="Error occurred (AddressLimitExceeded)"></a>Error occurred (AddressLimitExceeded)</h2><p>这是因为Elastic IP或者VPCs超过指定数量，我测试了下，似乎不允许炒过5个。<br>release Elastic IP和delete your VPCs 的步骤见<a target="_blank" rel="noopener" href="http://wiki.fast.ai/index.php/Starting_Over_with_AWS">Start Over with AWS</a>。</p>
<p>** Tips:每次bash前，需关闭所有Instance **</p>
<h2 id="启动AWS"><a href="#启动AWS" class="headerlink" title="启动AWS"></a>启动AWS</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">source aws-alias.sh</span><br><span class="line">alias</span><br><span class="line">aws-get-p2</span><br><span class="line">aws-start</span><br><span class="line">aws-ssh</span><br></pre></td></tr></table></figure>
<p>可将<code>source aws-alias.sh</code>写入<code>vim .bashrc</code>。<br>若出现<code>vim command not found</code>，这是因为缺少vim安装包。重新启动cygwin的setup.exe，默认安装，直到选择packages。选择 vim安装包，下一步安装。</p>
<h2 id="vim-使用"><a href="#vim-使用" class="headerlink" title="vim 使用"></a>vim 使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i 插入模式</span><br><span class="line">esc 命令模式</span><br><span class="line">:q 退出</span><br><span class="line">:wq 保存退出</span><br></pre></td></tr></table></figure>

<p>** 走到这一步，AWS配置就基本完成啦**</p>
<h1 id="好用的终端小工具"><a href="#好用的终端小工具" class="headerlink" title="好用的终端小工具"></a>好用的终端小工具</h1><p>tmux是linux中一种管理窗口的程序, 它提供了一个Session随时存储和恢复的功能, detach Session(保持Session后台运行)然后重新attach Session。</p>
<blockquote>
<p>常用场景, 在公司Terimal中开了多个标签和文件, 下班回家忽然有了灵感想要继续编写, 使用ssh远程链接公司电脑, 然后发现标签页和文件都要重新打开, 如果使用Tmux, 下班了detach当前Session, 回家ssh远程连接后, attach Session后, 场景恢复又能愉快的继续编程了…</p>
</blockquote>
<h2 id="tmux使用"><a href="#tmux使用" class="headerlink" title="tmux使用"></a>tmux使用</h2><p>前缀键<code>Crtl+b</code><br>按过前缀键后，然后按一下c =创建新窗口<br>按过前缀键后，然后按一下% =水平分割<br>按过前缀键后，然后按一下” =垂直分割</p>
<p>基于前缀键，还有常用的其他命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">o swap panes</span><br><span class="line">q show pane numbers</span><br><span class="line">x kill pane</span><br></pre></td></tr></table></figure>
<p>** 如有任何AWS配置安装问题，欢迎在评论中交流哈~**</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2017/09/08/%E5%BE%88%E4%B9%85%E4%BB%A5%E5%89%8D/" title="很久以前"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: 很久以前</span></a><a class="button is-default" href="/2017/09/03/%E8%85%BE%E8%AE%AF%E4%BA%A7%E5%9F%B9%E7%94%9F%E9%9D%A2%E7%BB%8F/" title="腾讯产培生面经"><span class="has-text-weight-semibold">Next: 腾讯产培生面经</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="zldodo/zldodo.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/zldodo"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> zldodo 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>