<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>Have Fun with SLAM-06-Raspberry Pi 3</title><meta name="description" content="Let it be"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="经过前面的积累，我们现在已经利用一台笔记本电脑和TurtleBot，就能够实现实时室内建图了。但是，考虑到实际应用场景，例如无人机来做SLAM，或是其他的移动平台，往往其计算能力是有限，而实时SLAM算法对计算机的性能较高。因此，我们可以在微机系统下录包，然后在笔记本上离线建图。这里，我们选择树莓派作为移动平台的处理器。
树莓派安装Ubuntu操作系统在树莓派上安装与笔记本上版本相同的Ubuntu系统。现在，Ubuntu MATE 16.04 LTS(xenial)已经发布，支持树莓派３和树莓派２．
刚接触树莓派的朋友，操作系统安装方法可参考这里。树莓派有HDMI借口，可以连电脑显示器，也可以买一块显示屏，显示屏配置方法可参考微雪电子４inch HDMI LCD。
安装ROS，Cartographer，Tu.."><meta name="generator" content="Hexo 5.4.0"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">zldodo's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Have Fun with SLAM-06-Raspberry Pi 3</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85Ubuntu%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-text">树莓派安装Ubuntu操作系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85ROS%EF%BC%8CCartographer%EF%BC%8CTurtleBot"><span class="toc-text">安装ROS，Cartographer，TurtleBot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AElaunch%E6%96%87%E4%BB%B6"><span class="toc-text">配置launch文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%95%E5%8C%85%E6%93%8D%E4%BD%9C"><span class="toc-text">录包操作</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/SLAM"><i class="tag post-item-tag">SLAM</i></a><a href="/tags/Cartographer"><i class="tag post-item-tag">Cartographer</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Have Fun with SLAM-06-Raspberry Pi 3</h1><time class="has-text-grey" datetime="2017-11-09T13:00:52.000Z">2017-11-09</time><article class="mt-2 post-content"><p>经过前面的积累，我们现在已经利用一台笔记本电脑和TurtleBot，就能够实现实时室内建图了。但是，考虑到实际应用场景，例如无人机来做SLAM，或是其他的移动平台，往往其计算能力是有限，而实时SLAM算法对计算机的性能较高。因此，我们可以在微机系统下录包，然后在笔记本上离线建图。这里，我们选择树莓派作为移动平台的处理器。</p>
<h2 id="树莓派安装Ubuntu操作系统"><a href="#树莓派安装Ubuntu操作系统" class="headerlink" title="树莓派安装Ubuntu操作系统"></a>树莓派安装Ubuntu操作系统</h2><p>在树莓派上安装与笔记本上版本相同的Ubuntu系统。现在，<a target="_blank" rel="noopener" href="https://ubuntu-mate.org/raspberry-pi/">Ubuntu MATE 16.04 LTS(xenial)</a>已经发布，支持树莓派３和树莓派２．</p>
<p>刚接触树莓派的朋友，操作系统安装方法可参考<a target="_blank" rel="noopener" href="http://bbs.elecfans.com/jishu_599362_1_1.html">这里</a>。树莓派有HDMI借口，可以连电脑显示器，也可以买一块显示屏，显示屏配置方法可参考<a target="_blank" rel="noopener" href="http://www.waveshare.net/wiki">微雪电子４inch HDMI LCD</a>。</p>
<h2 id="安装ROS，Cartographer，TurtleBot"><a href="#安装ROS，Cartographer，TurtleBot" class="headerlink" title="安装ROS，Cartographer，TurtleBot"></a>安装ROS，Cartographer，TurtleBot</h2><p>这里的安装过程与前面几节一模一样，那就当做再熟悉一遍安装流程吧：）</p>
<p>不过，需要注意的是，如果在树莓派安装UBuntu时，选择的是默认安装，没有手动分区，可能会造成在编译Cartographer_turtlebot时非常卡顿。那可不是一般的慢，让人误以为是系统死机了。后来找到了解决办法，原来是是需要扩展swap空间，具体方法请见<a target="_blank" rel="noopener" href="http://blog.csdn.net/wxz3wxz/article/details/70237302">树莓派swap空间扩展</a>。</p>
<h2 id="配置launch文件"><a href="#配置launch文件" class="headerlink" title="配置launch文件"></a>配置launch文件</h2><p>又要配置launch文件？没错，但操作非常简单，只需要更改<a href="hokuyo_xsens.launch">hokuyo_xsens.launch</a>里的一些配置就好。</p>
<ul>
<li><strong>在树莓派上</strong><br>因为不需要在树莓派上运行cartographer算法包，所以删除launch文件里的cartographer_node，cartographer_occupancy_grid_node，rviz就好了。附上我的<a href="raspi_turtlebot_hokuyo_xsens.launch">raspi_turtlebot_hokuyo_xsens.launch</a>。</li>
<li><strong>在笔记本上</strong><br>笔记本不需要启动各种传感器和移动平台，所有的传感器信息已经存在录制的bag文件里，所以，笔记本只需调用读取bag文件和cartographer算法包即可。录包方法将在后面介绍。</li>
</ul>
<p>这里我们使用到了一个cartographer离线建图包cartographer_offline_node，配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;node name=<span class="string">&quot;cartographer_offline_node&quot;</span> pkg=<span class="string">&quot;cartographer_ros&quot;</span></span><br><span class="line">    type=<span class="string">&quot;cartographer_offline_node&quot;</span> args=<span class="string">&quot;</span></span><br><span class="line"><span class="string">        -configuration_directory</span></span><br><span class="line"><span class="string">            $(find cartographer_turtlebot)/configuration_files</span></span><br><span class="line"><span class="string">        -configuration_basename turtlebot_hokuyo_2d.lua</span></span><br><span class="line"><span class="string">        -bag_filenames /home/dodo/bagfiles/2017-10-25-16-14-11.bag&quot;</span></span><br><span class="line">    output=<span class="string">&quot;screen&quot;</span>&gt;</span><br><span class="line">&lt;/node&gt;</span><br></pre></td></tr></table></figure>
<p>这里有两点需要注意：</p>
<ol>
<li>指定lua文件路径和名称，例如这里的configuration_directory和configuration_basename;</li>
<li>指定bag文件路径和名称 ,例如这里的bag_filenames /home/dodo/bagfiles/2017-10-25-16-14-11.bag 。<br>附上我的<a href="demo_offline_2d.launch">offline.launch</a></li>
</ol>
<h2 id="录包操作"><a href="#录包操作" class="headerlink" title="录包操作"></a>录包操作</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosbag record -a</span><br></pre></td></tr></table></figure>
<p>详细的使用方法请见<a target="_blank" rel="noopener" href="http://wiki.ros.org/cn/ROS/Tutorials/Recording%20and%20playing%20back%20data">ROS/Recording and play</a>。</p>
<p>好了，赶紧去试试树莓派吧～</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2017/11/09/07-SLAM-Summary/" title="Have Fun with SLAM-07-Summary"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: Have Fun with SLAM-07-Summary</span></a><a class="button is-default" href="/2017/11/09/05-SLAM-IMU/" title="Have Fun with SLAM-05-IMU"><span class="has-text-weight-semibold">Next: Have Fun with SLAM-05-IMU</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="zldodo/zldodo.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/zldodo"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> zldodo 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>